<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistik</title>
    <link href="img/logo.png" rel="icon">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-gray-100">
    <div class="flex">
        <!-- Sidebar -->
        <aside
      class="fixed inset-y-0 left-0 z-50 w-64 bg-[#213555] shadow-lg transform transition-transform duration-300 ease-in-out translate-x-0 lg:translate-x-0">
      <div class="h-full flex flex-col">
        <div class="px-6 py-4 border-b">
          <div class="flex items-center space-x-2 p-4">
            <img id="logo" src="img/logo.png" alt="Logo" class="w-10 h-auto object-contain">
            <span class="font-bold text-white">Harmony Hall</span>
          </div>
        </div>
        <nav class="flex-1 px-4 py-6 space-y-2">
          <a href="./dashboard.html" class="flex items-center px-4 py-3 text-white hover:bg-[#78B3CE] rounded-lg">Dashboard</a>
          <a href="./bookings.html" class="flex items-center px-4 py-3 text-white hover:bg-[#78B3CE] rounded-lg">Bookings</a>
          <a href="./payments.html" class="flex items-center px-4 py-3 text-white hover:bg-[#78B3CE] rounded-lg">Payments</a>
          <a href="#" class="flex items-center px-4 py-3 text-gray-700 bg-gray-100 rounded-lg">Statistic</a>
          <a href="./team.html" class="flex items-center px-4 py-3 text-white hover:bg-[#78B3CE] rounded-lg">Teams</a>
        </nav>
        <div class="px-4 py-6 border-t">
          <a href="#" class="flex items-center px-4 py-3 text-white hover:bg-[#78B3CE] rounded-lg w-full">Logout</a>
        </div>
      </div>
    </aside>
        <div class="lg:pl-64 w-full">
            <header class="bg-white shadow-sm">
                <div class="flex items-center justify-between px-6 py-4">
                    <div class="flex-1 max-w-xl ml-6 relative">
                        <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400">
                            <use xlink:href="#search"></use>
                        </svg>
                        <input type="text" placeholder="Search for rooms..."
                            class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="p-2 rounded-lg hover:bg-gray-100 relative">
                            <svg class="h-6 w-6 text-gray-600">
                                <use xlink:href="#bell"></use>
                            </svg>
                            <span class="absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"></span>
                        </button>
                        <img src="https://api.dicebear.com/9.x/thumbs/svg?seed=orijaaaa" alt="Profile"
                            class="h-8 w-8 rounded-full">
                    </div>
                </div>
            </header>

            <div class="p-6 space-y-6">

                <!-- Filter Time Period -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">Filter Periode Waktu</h3>
                    <div class="flex space-x-4">
                        <button id="weeklyFilter"
                            class="px-4 py-2 text-sm font-semibold text-gray-600 bg-gray-200 rounded-lg hover:bg-gray-300">Minggu</button>
                        <button id="monthlyFilter"
                            class="px-4 py-2 text-sm font-semibold text-gray-600 bg-gray-200 rounded-lg hover:bg-gray-300">Bulan</button>
                        <button id="yearlyFilter"
                            class="px-4 py-2 text-sm font-semibold text-gray-600 bg-gray-200 rounded-lg hover:bg-gray-300">Tahun</button>
                    </div>
                </div>
                <!-- Statistik dan Grafik -->
                <div id="statistics-view">
                    <div class="space-y-6">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Monthly Revenue Trend -->
                            <div class="bg-white rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold mb-4">Rata-Rata Pendapatan Bulanan</h3>
                                <canvas id="monthlyRevenueChart"></canvas>
                            </div>

                            <!-- Room Occupancy -->
                            <div class="bg-white rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold mb-4">Ruang Hunian</h3>
                                <canvas id="occupancyChart"></canvas>
                            </div>

                            <!-- Bookings by Room Type -->
                            <div class="bg-white rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold mb-4">Tipe Ruangan</h3>
                                <canvas id="bookingsChart"></canvas>
                            </div>

                            <div class="bg-white rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold mb-4">Metrik Utama</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="p-4 bg-blue-50 rounded-lg">
                                        <p class="text-sm text-gray-600">Tarif Harian Rata-Rata</p>
                                        <p class="text-2xl font-semibold text-blue-600">Rp 5.000.000</p>
                                        <p class="text-xs text-green-600">+5.2% vs bulan sebelumnya</p>
                                    </div>
                                    <div class="p-4 bg-green-50 rounded-lg">
                                        <p class="text-sm text-gray-600">Ruangan Hunian</p>
                                        <p class="text-2xl font-semibold text-green-600">85%</p>
                                        <p class="text-xs text-green-600">+2.1% vs bulan sebelumnya</p>
                                    </div>
                                    <div class="p-4 bg-yellow-50 rounded-lg">
                                        <p class="text-sm text-gray-600">Pendapatan per Ruangan</p>
                                        <p class="text-2xl font-semibold text-yellow-600">Rp 1.000.000</p>
                                        <p class="text-xs text-green-600">+3.8% vs bulan sebelumnya</p>
                                    </div>
                                    <div class="p-4 bg-purple-50 rounded-lg">
                                        <p class="text-sm text-gray-600">Total Pemesanan</p>
                                        <p class="text-2xl font-semibold text-purple-600">85</p>
                                        <p class="text-xs text-green-600">+7.5% vs bulan sebelumnya</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

            <script>
                // Chart data
                const monthlyRevenueData = {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
                    datasets: [{
                        label: 'Pendapatan Bulanan',
                        data: [3000000, 3500000, 3245000, 3800000, 4000000, 4200000],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        fill: true
                    }]
                };

                const occupancyData = {
                    labels: ['Ditempati', 'Tersedia', 'Pemeliharaan'],
                    datasets: [{
                        data: [18, 6, 2],
                        backgroundColor: ['rgba(34, 197, 94, 0.8)', 'rgba(59, 130, 246, 0.8)', 'rgba(234, 179, 8, 0.8)']
                    }]
                };

                const bookingsData = {
                    labels: ['Aula Khusus', 'Aula Umum', 'Lab'],
                    datasets: [{
                        label: 'Pemesanan berdasarkan Tipe Kamar',
                        data: [25, 30, 20],
                        backgroundColor: 'rgba(59, 130, 246, 0.8)'
                    }]
                };

                // Create Charts
                const monthlyRevenueChart = new Chart(document.getElementById('monthlyRevenueChart'), {
                    type: 'line',
                    data: monthlyRevenueData,
                    options: { responsive: true }
                });

                const occupancyChart = new Chart(document.getElementById('occupancyChart'), {
                    type: 'doughnut',
                    data: occupancyData,
                    options: { responsive: true }
                });

                const bookingsChart = new Chart(document.getElementById('bookingsChart'), {
                    type: 'bar',
                    data: bookingsData,
                    options: { responsive: true }
                });

                // Filter Buttons Logic
                document.getElementById('weeklyFilter').addEventListener('click', function () {
                    updateChartData('weekly');
                });

                document.getElementById('monthlyFilter').addEventListener('click', function () {
                    updateChartData('monthly');
                });

                document.getElementById('yearlyFilter').addEventListener('click', function () {
                    updateChartData('yearly');
                });

                // Function to update chart data
                function updateChartData(period) {
                    const updatedData = getChartDataForPeriod(period);
                    monthlyRevenueChart.data.labels = updatedData.labels;
                    monthlyRevenueChart.data.datasets[0].data = updatedData.revenueData;
                    monthlyRevenueChart.update();

                    occupancyChart.data.datasets[0].data = updatedData.occupancyData;
                    occupancyChart.update();

                    bookingsChart.data.datasets[0].data = updatedData.bookingsData;
                    bookingsChart.update();
                }

                // Function to get new chart data based on selected period
                function getChartDataForPeriod(period) {
                    if (period === 'weekly') {
                        return {
                            labels: ['Minggu 1', 'Minggu 2', 'Minggu 3', 'Minggu 4'],
                            revenueData: [1000000, 1200000, 1100000, 1400000],
                            occupancyData: [15, 10, 5],
                            bookingsData: [5, 8, 7, 5]
                        };
                    } else if (period === 'monthly') {
                        return {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
                            revenueData: [3000000, 3500000, 3245000, 3800000, 4000000, 4200000],
                            occupancyData: [18, 6, 2],
                            bookingsData: [25, 30, 20, 10]
                        };
                    } else { // yearly
                        return {
                            labels: ['2023', '2024'],
                            revenueData: [36000000, 42000000],
                            occupancyData: [80, 85],
                            bookingsData: [100, 120]
                        };
                    }
                }
            </script>
</body>

</html>